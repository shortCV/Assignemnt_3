<!DOCTYPE html>
<html>
    <head>
        <title>user click Test</title>
        <meta charset="utf-8" />
    </head>

    <body>
        <!-- our buttond to tell others -->
        <button id="red" style="background-color:rgb(255, 0, 0); color:rgb(255, 255, 255)">RED</button>
        <button id="blue" style="background-color:rgb(0, 0, 255); color:rgb(255, 255, 255)">BLUE</button>
    
    <script src="/socket.io/socket.io.js"></script>
    <script>
        let socket = io();

        socket.on('connect', (userData) => {
            console.log('i am connected');

            document.querySelector('#red').addEventListener('click', function(){
                console.log('red button clicked');
                socket.emit('red');
            });

        document.querySelector('#blue').addEventListener('click', function(){
                console.log('blue button clicked');
                socket.emit('blue');
            });

            socket.on('color_change', (data) => {
                let colorStr = 'rgb(' + data.r + "," + data.g + "," + data.b + ")";
                console.log('color_change socket event: ' + colorStr);
                document.body.style.backgroundColor = colorStr;
            });
        });
    </script>
    </body>
</html>
